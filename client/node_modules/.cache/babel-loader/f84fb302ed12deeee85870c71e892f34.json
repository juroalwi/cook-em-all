{"ast":null,"code":"var _jsxFileName = \"/home/jralvarezwindey/Escritorio/food/client/src/components/CreateRecipe/CreateRecipeSmart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport CreateRecipeDumb from './CreateRecipeDumb';\nimport defaultRecipe from \"../../media/default-recipe.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction validation(details) {\n  const error = {\n    disableSubmit: false\n  };\n  const scoreRegex = /^0*([0-5](\\.[0-9]*)?$)/;\n  const healthScoreRegex = /^0*(([0-9][0-9]?$)|(100$))/;\n\n  if (/^\\s*$/.test(details.title)) {\n    error.title = true;\n    error.disableSubmit = true;\n  }\n\n  ;\n\n  if (/^\\s*$/.test(details.summary)) {\n    error.summary = true;\n    error.disableSubmit = true;\n  }\n\n  ;\n\n  if (!scoreRegex.test(details.score) && details.score !== '') {\n    error.score = true;\n    error.disableSubmit = true;\n  }\n\n  ;\n\n  if (!healthScoreRegex.test(details.healthScore) && details.healthScore !== '') {\n    error.healthScore = true;\n    error.disableSubmit = true;\n  }\n\n  ;\n  return error;\n}\n\nexport default function CreateRecipeSmart() {\n  _s();\n\n  const [errors, setErrors] = useState({\n    title: false,\n    summary: false,\n    score: false,\n    healthScore: false,\n    disableSubmit: true\n  });\n  const [details, setDetails] = useState({\n    title: '',\n    summary: '',\n    score: '',\n    healthScore: '',\n    instruction: '',\n    instructions: [],\n    diets: []\n  });\n  const navigate = useNavigate();\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const {\n      title,\n      summary,\n      score,\n      healthScore,\n      instructions,\n      diets\n    } = details;\n\n    try {\n      const result = await axios({\n        method: 'post',\n        url: 'http://localhost:3001/recipes/create',\n        headers: {},\n        data: {\n          title,\n          summary,\n          score,\n          healthScore,\n          instructions,\n          diets,\n          image: defaultRecipe\n        }\n      });\n      navigate(`/recipe/detail/${result.data.id}`);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function handleChange(event) {\n    setDetails({ ...details,\n      [event.target.name]: event.target.value\n    });\n    setErrors(validation({ ...details,\n      [event.target.name]: event.target.value\n    }));\n  }\n\n  function handleAddInstruction(event) {\n    if (details.instruction === '') return;\n    setDetails({ ...details,\n      instruction: '',\n      instructions: [...details.instructions, details.instruction]\n    });\n  }\n\n  function handleRemoveInstruction(instructionIndexToBeRemoved) {\n    setDetails({ ...details,\n      instructions: details.instructions.filter((instruction, index) => index !== instructionIndexToBeRemoved)\n    });\n  }\n\n  function handleSelectedDiets(diet) {\n    const index = details.diets.indexOf(diet);\n    setDetails({ ...details,\n      diets: index !== -1 ? details.diets.filter(selectedDiet => selectedDiet !== diet) : [...details.diets, diet]\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(CreateRecipeDumb, {\n    details: details,\n    errors: errors,\n    handleSubmit: handleSubmit,\n    handleChange: handleChange,\n    handleAddInstruction: handleAddInstruction,\n    handleRemoveInstruction: handleRemoveInstruction,\n    handleSelectedDiets: handleSelectedDiets\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 11\n  }, this);\n}\n\n_s(CreateRecipeSmart, \"JATJPUe7SjELDkaKfD/BZXtCoVc=\", false, function () {\n  return [useNavigate];\n});\n\n_c = CreateRecipeSmart;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateRecipeSmart\");","map":{"version":3,"sources":["/home/jralvarezwindey/Escritorio/food/client/src/components/CreateRecipe/CreateRecipeSmart.js"],"names":["React","useState","useNavigate","axios","CreateRecipeDumb","validation","details","error","disableSubmit","scoreRegex","healthScoreRegex","test","title","summary","score","healthScore","CreateRecipeSmart","errors","setErrors","setDetails","instruction","instructions","diets","navigate","handleSubmit","e","preventDefault","result","method","url","headers","data","image","defaultRecipe","id","console","log","handleChange","event","target","name","value","handleAddInstruction","handleRemoveInstruction","instructionIndexToBeRemoved","filter","index","handleSelectedDiets","diet","indexOf","selectedDiet"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport CreateRecipeDumb from './CreateRecipeDumb';\nimport defaultRecipe from '../../media/default-recipe.svg'\n\nfunction validation(details) {\n  const error = { disableSubmit: false };\n  const scoreRegex = /^0*([0-5](\\.[0-9]*)?$)/;\n  const healthScoreRegex = /^0*(([0-9][0-9]?$)|(100$))/;\n  if (/^\\s*$/.test(details.title)) { error.title = true; error.disableSubmit = true };\n  if (/^\\s*$/.test(details.summary)) { error.summary = true; error.disableSubmit = true };\n  if (!scoreRegex.test(details.score) && details.score !== '') { error.score = true; error.disableSubmit = true };\n  if (!healthScoreRegex.test(details.healthScore) && details.healthScore !== '') { error.healthScore = true; error.disableSubmit = true };\n  return error;\n}\n\nexport default function CreateRecipeSmart() {\n  const [errors, setErrors] = useState({title: false, summary: false, score: false, healthScore: false, disableSubmit: true});\n  const [details, setDetails] = useState({ title: '', summary: '', score: '', healthScore: '', instruction: '', instructions: [], diets: []});\n  const navigate = useNavigate();\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    const {title, summary, score, healthScore, instructions, diets} = details;\n\n    try {\n      const result = await axios({\n        method: 'post',\n        url: 'http://localhost:3001/recipes/create',\n        headers: {}, \n        data: {title, summary, score, healthScore, instructions, diets, image: defaultRecipe},\n      });\n      navigate(`/recipe/detail/${result.data.id}`);\n    } catch(error) {\n      console.log(error);\n    }\n  }\n\n  function handleChange(event) {\n    setDetails({\n      ...details,\n      [event.target.name]: event.target.value,\n    });\n    setErrors(validation({\n      ...details,\n      [event.target.name]: event.target.value,\n    }));\n  } \n\n  function handleAddInstruction(event) {\n    if (details.instruction === '') return;\n    setDetails({\n      ...details,\n      instruction: '',\n      instructions: [...details.instructions, details.instruction]\n    });\n  }\n\n  function handleRemoveInstruction(instructionIndexToBeRemoved) {\n    setDetails({\n      ...details,\n      instructions: details.instructions.filter((instruction, index) =>  index !== instructionIndexToBeRemoved),\n    })\n  }\n\n  function handleSelectedDiets(diet) {\n    const index = details.diets.indexOf(diet);\n    setDetails({\n      ...details,\n      diets: index !== -1 ? details.diets.filter(selectedDiet => selectedDiet !== diet) : [...details.diets, diet]\n    })\n  }\n\n  return  <CreateRecipeDumb \n      details={ details }\n      errors={ errors }\n      handleSubmit={ handleSubmit }\n      handleChange={ handleChange }\n      handleAddInstruction={ handleAddInstruction }\n      handleRemoveInstruction={ handleRemoveInstruction }\n      handleSelectedDiets={ handleSelectedDiets }\n    />\n};\n"]},"metadata":{},"sourceType":"module"}