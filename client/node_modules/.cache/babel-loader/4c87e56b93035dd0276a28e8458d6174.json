{"ast":null,"code":"var _jsxFileName = \"/home/jralvarezwindey/Escritorio/henry-ip-food/client/src/components/CreateRecipe/CreateRecipeSmart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport CreateRecipeDumb from './CreateRecipeDumb';\nimport defaultRecipe from \"../../media/default-recipe.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction validation(details) {\n  const error = {\n    disableSubmit: false\n  };\n  const numbersRegex = /(^[0-9][0-9]?$)|(^100$)/;\n\n  if (details.title === '') {\n    error.title = true;\n    error.disableSubmit = true;\n  }\n\n  ;\n\n  if (details.summary === '') {\n    error.summary = true;\n    error.disableSubmit = true;\n  }\n\n  ;\n\n  if (!numbersRegex.test(details.score) && details.score !== '') {\n    error.score = true;\n    error.disableSubmit = true;\n  }\n\n  ;\n\n  if (!numbersRegex.test(details.healthScore) && details.healthScore !== '') {\n    error.healthScore = true;\n    error.disableSubmit = true;\n  }\n\n  ;\n  return error;\n}\n\nexport default function CreateRecipeSmart() {\n  _s();\n\n  const [errors, setErrors] = useState({\n    title: false,\n    summary: false,\n    score: false,\n    healthScore: false,\n    disableSubmit: true\n  });\n  const [details, setDetails] = useState({\n    title: '',\n    summary: '',\n    score: '',\n    healthScore: '',\n    instruction: '',\n    instructions: [],\n    diets: []\n  });\n  const navigate = useNavigate();\n\n  async function handleFormSubmit(e, selectedDiets) {\n    e.preventDefault();\n    const data = details;\n\n    try {\n      const result = await axios({\n        method: 'post',\n        url: 'http://localhost:3001/recipes/create',\n        headers: {},\n        data: { ...data,\n          diets: selectedDiets,\n          image: defaultRecipe\n        }\n      });\n      navigate(`/recipe/detail/${result.data.id}`);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function handleChange(event) {\n    setDetails({ ...details,\n      [event.target.name]: event.target.value\n    });\n    setErrors(validation({ ...details,\n      [event.target.name]: event.target.value\n    }));\n  }\n\n  function handleAddInstruction(event) {\n    if (details.instruction === '') return;\n    setDetails({ ...details,\n      instruction: '',\n      instructions: [...details.instructions, details.instruction]\n    });\n  }\n\n  function handleRemoveInstruction(instructionIndexToBeRemoved) {\n    setDetails({ ...details,\n      instructions: details.instructions.filter((instruction, index) => index !== instructionIndexToBeRemoved)\n    });\n  }\n\n  function handleSelectedDiets(diet) {\n    const index = details.diets.indexOf(diet);\n    setDetails({ ...details,\n      diets: index !== -1 ? details.diets(details.diets.filter(selectedDiet => selectedDiet !== diet)) : details.diets([...details.diets, diet])\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(CreateRecipeDumb, {\n    details: details,\n    errors: errors,\n    handleFormSubmit: handleFormSubmit,\n    handleChange: handleChange,\n    handleAddInstruction: handleAddInstruction,\n    handleRemoveInstruction: handleRemoveInstruction,\n    handleSelectedDiets: handleSelectedDiets\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 11\n  }, this);\n}\n\n_s(CreateRecipeSmart, \"JATJPUe7SjELDkaKfD/BZXtCoVc=\", false, function () {\n  return [useNavigate];\n});\n\n_c = CreateRecipeSmart;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateRecipeSmart\");","map":{"version":3,"sources":["/home/jralvarezwindey/Escritorio/henry-ip-food/client/src/components/CreateRecipe/CreateRecipeSmart.js"],"names":["React","useState","useNavigate","axios","CreateRecipeDumb","validation","details","error","disableSubmit","numbersRegex","title","summary","test","score","healthScore","CreateRecipeSmart","errors","setErrors","setDetails","instruction","instructions","diets","navigate","handleFormSubmit","e","selectedDiets","preventDefault","data","result","method","url","headers","image","defaultRecipe","id","console","log","handleChange","event","target","name","value","handleAddInstruction","handleRemoveInstruction","instructionIndexToBeRemoved","filter","index","handleSelectedDiets","diet","indexOf","selectedDiet"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport CreateRecipeDumb from './CreateRecipeDumb';\nimport defaultRecipe from '../../media/default-recipe.svg'\n\nfunction validation(details) {\n  const error = { disableSubmit: false };\n  const numbersRegex = /(^[0-9][0-9]?$)|(^100$)/;\n  if (details.title === '') { error.title = true; error.disableSubmit = true };\n  if (details.summary === '') { error.summary = true; error.disableSubmit = true };\n  if (!numbersRegex.test(details.score) && details.score !== '') { error.score = true; error.disableSubmit = true };\n  if (!numbersRegex.test(details.healthScore) && details.healthScore !== '') { error.healthScore = true; error.disableSubmit = true };\n  return error;\n}\n\nexport default function CreateRecipeSmart() {\n  const [errors, setErrors] = useState({title: false, summary: false, score: false, healthScore: false, disableSubmit: true});\n  const [details, setDetails] = useState({ title: '', summary: '', score: '', healthScore: '', instruction: '', instructions: [], diets: []});\n  const navigate = useNavigate();\n\n  async function handleFormSubmit(e, selectedDiets) {\n    e.preventDefault();\n\n    const data = details;\n\n    try {\n      const result = await axios({\n        method: 'post',\n        url: 'http://localhost:3001/recipes/create',\n        headers: {}, \n        data: {...data, diets: selectedDiets, image: defaultRecipe},\n      });\n      navigate(`/recipe/detail/${result.data.id}`);\n    } catch(error) {\n      console.log(error);\n    }\n  }\n\n  function handleChange(event) {\n    setDetails({\n      ...details,\n      [event.target.name]: event.target.value,\n    });\n    setErrors(validation({\n      ...details,\n      [event.target.name]: event.target.value,\n    }));\n  } \n\n  function handleAddInstruction(event) {\n    if (details.instruction === '') return;\n    setDetails({\n      ...details,\n      instruction: '',\n      instructions: [...details.instructions, details.instruction]\n    });\n  }\n\n  function handleRemoveInstruction(instructionIndexToBeRemoved) {\n    setDetails({\n      ...details,\n      instructions: details.instructions.filter((instruction, index) =>  index !== instructionIndexToBeRemoved),\n    })\n  }\n\n  function handleSelectedDiets(diet) {\n    const index = details.diets.indexOf(diet);\n    setDetails({\n      ...details,\n      diets: index !== -1 ? details.diets(details.diets.filter(selectedDiet => selectedDiet !== diet)) : details.diets([...details.diets, diet])\n    })\n  }\n\n  return  <CreateRecipeDumb \n      details={ details }\n      errors={ errors }\n      handleFormSubmit={ handleFormSubmit }\n      handleChange={ handleChange }\n      handleAddInstruction={ handleAddInstruction }\n      handleRemoveInstruction={ handleRemoveInstruction }\n      handleSelectedDiets={ handleSelectedDiets }\n    />\n};\n"]},"metadata":{},"sourceType":"module"}