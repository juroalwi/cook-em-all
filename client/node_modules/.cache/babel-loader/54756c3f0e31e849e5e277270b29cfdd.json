{"ast":null,"code":"import { GET_CARDS, GET_ALL_FILTERS, CHANGE_APPLIED_FILTERS, CHANGE_CURRENT_PAGE, FILTER_CARDS, SORT_CARDS } from '../actions';\nconst initialState = {\n  query: '',\n  cards: [],\n  allFilters: [],\n  appliedFilters: [],\n  currentPage: 0,\n  filteredCards: [],\n  sortCriteria: 'none'\n};\nexport default function reducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let {\n    type,\n    payload\n  } = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (type) {\n    case GET_CARDS:\n      payload.cards[0].map(dbRecipe => ({ ...dbRecipe,\n        diets: dbRecipe.diets.map(diet => diet.name)\n      }));\n      console.log(payload.cards[0]);\n      return { ...state,\n        query: payload.query,\n        cards: [...payload.cards[0], ...payload.cards[1]],\n        currentPage: 0\n      };\n\n    case GET_ALL_FILTERS:\n      return { ...state,\n        allFilters: payload\n      };\n\n    case CHANGE_APPLIED_FILTERS:\n      return { ...state,\n        appliedFilters: changeAppliedFiltersManager([...state.appliedFilters], payload)\n      };\n\n    case CHANGE_CURRENT_PAGE:\n      return { ...state,\n        currentPage: payload\n      };\n\n    case FILTER_CARDS:\n      return { ...state,\n        filteredCards: filterCardsManager([...state.cards], [...state.appliedFilters])\n      };\n\n    case SORT_CARDS:\n      return { ...state,\n        currentPage: 0,\n        filteredCards: sortCardsManager([...state.filteredCards], payload),\n        sortCriteria: payload\n      };\n\n    default:\n      return { ...state\n      };\n  }\n}\n;\n\nfunction changeAppliedFiltersManager(appliedFilters, filter) {\n  appliedFilters.includes(filter) ? appliedFilters.splice(appliedFilters.indexOf(filter), 1) : appliedFilters.push(filter);\n  return appliedFilters;\n}\n\nfunction filterCardsManager(cards, appliedFilters) {\n  return cards.filter(card => {\n    return appliedFilters.every(filter => card.diets.includes(filter));\n  });\n}\n\n;\n\nfunction sortCardsManager(array, sortCriteria) {\n  switch (sortCriteria) {\n    case 'az':\n      return array.sort((x, y) => x.title.localeCompare(y.title));\n\n    case 'za':\n      return array.sort((x, y) => y.title.localeCompare(x.title));\n\n    case 'score':\n      return array.sort((x, y) => y.score - x.score);\n\n    default:\n      return array;\n  }\n}\n\n;","map":{"version":3,"sources":["/home/jralvarezwindey/Escritorio/henry-ip-food/client/src/reducer/index.js"],"names":["GET_CARDS","GET_ALL_FILTERS","CHANGE_APPLIED_FILTERS","CHANGE_CURRENT_PAGE","FILTER_CARDS","SORT_CARDS","initialState","query","cards","allFilters","appliedFilters","currentPage","filteredCards","sortCriteria","reducer","state","type","payload","map","dbRecipe","diets","diet","name","console","log","changeAppliedFiltersManager","filterCardsManager","sortCardsManager","filter","includes","splice","indexOf","push","card","every","array","sort","x","y","title","localeCompare","score"],"mappings":"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","sourcesContent":["import { GET_CARDS, GET_ALL_FILTERS, CHANGE_APPLIED_FILTERS, CHANGE_CURRENT_PAGE, FILTER_CARDS, SORT_CARDS } from '../actions';\n\nconst initialState = {\n  query: '',\n  cards: [],\n  allFilters: [],\n  appliedFilters: [],\n  currentPage: 0,\n  filteredCards: [],\n  sortCriteria: 'none',\n};\n\nexport default function reducer(state = initialState, { type, payload}) {\n  switch(type) {\n    case GET_CARDS: \n      payload.cards[0].map(dbRecipe => ({...dbRecipe, diets: dbRecipe.diets.map(diet => diet.name)}))\n      console.log(payload.cards[0])\n      return {\n        ...state,\n        query: payload.query,\n        cards: [...payload.cards[0], ...payload.cards[1]],\n        currentPage: 0,\n      };\n\n    case GET_ALL_FILTERS:\n      return {\n        ...state,\n        allFilters: payload,\n      }\n\n    case CHANGE_APPLIED_FILTERS: \n      return {\n        ...state,\n        appliedFilters: changeAppliedFiltersManager([...state.appliedFilters], payload)\n      }\n\n    case CHANGE_CURRENT_PAGE:\n      return {\n        ...state,\n       currentPage: payload,\n      }\n\n    case FILTER_CARDS:\n      return {\n        ...state,\n        filteredCards: filterCardsManager([...state.cards], [...state.appliedFilters])\n      }\n\n    case SORT_CARDS:\n      return {\n        ...state,\n        currentPage: 0,\n        filteredCards: sortCardsManager([...state.filteredCards], payload),\n        sortCriteria: payload,\n      }\n\n    default:\n      return {\n        ...state,\n      };\n  }\n};\n\nfunction changeAppliedFiltersManager(appliedFilters, filter) {\n  appliedFilters.includes(filter) \n    ? appliedFilters.splice(appliedFilters.indexOf(filter), 1) \n    : appliedFilters.push(filter)\n  return appliedFilters;\n}\n\nfunction filterCardsManager(cards, appliedFilters) {\n  return cards.filter(card => {\n    return appliedFilters.every(filter => card.diets.includes(filter))\n  })\n};\n\nfunction sortCardsManager(array, sortCriteria) {\n  switch(sortCriteria) {\n    case 'az': return array.sort((x, y) => x.title.localeCompare(y.title));\n    case 'za': return array.sort((x, y) => y.title.localeCompare(x.title));\n    case 'score': return array.sort((x, y) => y.score - x.score);\n    default: return array;\n  }\n};\n\n"]},"metadata":{},"sourceType":"module"}